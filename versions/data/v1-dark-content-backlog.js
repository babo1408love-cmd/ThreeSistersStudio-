// ================================================================
// ì½˜í…ì¸  ë°±ë¡œê·¸ ì‹œìŠ¤í…œ (Content Backlog Registry)
// ================================================================
// ë¯¸ë˜ êµ¬í˜„ ì˜ˆì • ì½˜í…ì¸ ë¥¼ ë“±ë¡í•´ë‘ê³ , êµ¬í˜„ ì‹œì ì— êº¼ë‚´ ì“°ëŠ” ì‹œìŠ¤í…œ.
// status: 'planned' â†’ 'in_progress' â†’ 'implemented'
// í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ ê°€ëŠ¥ (ì˜ˆ: 'ê³µì¤‘ì „' ì–¸ê¸‰ ì‹œ í•´ë‹¹ ë°±ë¡œê·¸ ì°¸ì¡°)

export const CONTENT_BACKLOG = {

  // ============================================================
  // ê³µì¤‘ì „ (Aerial Combat) â€” ë³´ìŠ¤ì „ ì‹œìŠ¤í…œ
  // ============================================================
  aerial_combat: {
    id: 'aerial_combat',
    name: 'ê³µì¤‘ì „',
    nameEn: 'Aerial Combat',
    status: 'planned',       // planned | in_progress | implemented
    priority: 'high',
    tags: ['boss', 'combat', 'aerial', 'action', 'booster'],

    // ê°œìš”
    summary: 'ë‚ ì•„ë‹¤ë‹ˆëŠ” ë³´ìŠ¤(ìš”ì • ë³´ìŠ¤, ë“œë˜ê³¤ ë“±)ì™€ ê³µì¤‘ì—ì„œ ì „íˆ¬í•˜ëŠ” ë³´ìŠ¤ì „ ì‹œìŠ¤í…œ',

    // ì  ìœ í˜•
    enemies: {
      types: ['fairy_boss', 'dragon', 'flying_boss'],
      description: 'ë‚ ì•„ë‹¤ë‹ˆëŠ” ë³´ìŠ¤ â€” ìš”ì • ë³´ìŠ¤, ë“œë˜ê³¤ ë“± ëŒ€í˜• ë¹„í–‰ ë³´ìŠ¤',
    },

    // í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜: ë¶€ìŠ¤í„° (ì§ˆì£¼)
    booster: {
      trigger: 'rage_gauge',   // ë¶„ë…¸ ê²Œì´ì§€ ì‚¬ìš© (í™•ì •)
      name: 'ë¶€ìŠ¤í„° ì§ˆì£¼',
      description: 'ë¶„ë…¸ ê²Œì´ì§€ 100% â†’ ì¼ì •ì‹œê°„ ì—„ì²­ë‚œ ì†ë„ë¡œ ì§ˆì£¼í•˜ëŠ” ìŠ¤í”¼ë“œ ì•¡ì…˜',
      duration: null,          // ë¯¸ì • (ì´ˆ ë‹¨ìœ„)
      effects: {
        speedMultiplier: null, // ë¯¸ì •
        attackBonus: null,     // ë¯¸ì •
      },
    },

    // ì—°ì¶œ: ë¶€ìŠ¤í„° ë°œë™ ì‹œ
    boosterVisual: {
      // ì›Œí”„ ì´í™íŠ¸ â€” ë³„ë“¤ì´ ê¸¸ê²Œ ëŠ˜ì–´ë‚˜ë©´ì„œ ê°€ìš´ë°ë¡œ ì§‘ì¤‘
      warpEffect: {
        description: 'ë³„(íŒŒí‹°í´)ì´ ê¸¸ê²Œ ëŠ˜ì–´ë‚˜ë©´ì„œ í™”ë©´ ì¤‘ì‹¬ìœ¼ë¡œ ìˆ˜ë ´í•˜ëŠ” ì›Œí”„ ì—°ì¶œ',
        implementation: [
          'Canvas íŒŒí‹°í´: í™”ë©´ ê°€ì¥ìë¦¬ â†’ ì¤‘ì•™ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì´ë™',
          'íŒŒí‹°í´ ëª¨ì–‘: ì‘ì€ ì  â†’ ê¸´ ì„ (ìŠ¤íŠ¸ë¦­)ìœ¼ë¡œ ë³€í˜•',
          'ì†ë„ê° ë°°ê²½: ë°°ê²½ ìŠ¤í¬ë¡¤ ê¸‰ê°€ì† + ë¸”ëŸ¬ íš¨ê³¼',
          'ì‹œì„  ì§‘ì¤‘: í™”ë©´ ê°€ì¥ìë¦¬ ë¹„ë„¤íŒ… + ì¤‘ì•™ ë°ì•„ì§',
        ],
      },

      // ë³´ìŠ¤ ë°˜ì‘ ì—°ì¶œ â€” ë¹ ë¥´ê²Œ ì•ì„ ë³´ë©° ë’¤ë¡œ ë¬¼ëŸ¬ë‚¨
      bossReaction: {
        description: 'ì  ë³´ìŠ¤ê°€ ì •ë©´(í”Œë ˆì´ì–´ ë°©í–¥)ì„ ë°”ë¼ë³´ë©´ì„œ ë¹ ë¥´ê²Œ ë’¤ë¡œ í›„í‡´í•˜ëŠ” ì—°ì¶œ',
        implementation: [
          'ë³´ìŠ¤ ìŠ¤í”„ë¼ì´íŠ¸: ì •ë©´ ì‘ì‹œ ìì„¸ (ë†€ë€/ë°©ì–´ ëª¨ì…˜)',
          'ë³´ìŠ¤ ì´ë™: ë¹ ë¥¸ ì†ë„ë¡œ í›„ë°© ì´ë™ (í”Œë ˆì´ì–´ë³´ë‹¤ ì•½ê°„ ëŠë¦¼)',
          'ë³´ìŠ¤ ì£¼ë³€ ì´í™íŠ¸: ë°”ëŒ/ì¶©ê²©íŒŒ íŒŒí‹°í´',
        ],
      },

      // ì£¼ì¸ê³µ ì¶”ê²© ì—°ì¶œ â€” ë³´ìŠ¤ë¥¼ ë”°ë¼ê°€ë©° ê³µê²©
      heroChase: {
        description: 'ì£¼ì¸ê³µì´ í›„í‡´í•˜ëŠ” ë³´ìŠ¤ë¥¼ ì¶”ê²©í•˜ë©° ì—°ì† ê³µê²©í•˜ëŠ” ì•¡ì…˜ ì—°ì¶œ',
        implementation: [
          'ì£¼ì¸ê³µ: ëŒì§„ ìì„¸ + ì”ìƒ(ê³ ìŠ¤íŠ¸) ì´í™íŠ¸',
          'ì¹´ë©”ë¼: ì£¼ì¸ê³µ ë’¤ì—ì„œ ë”°ë¼ê°€ëŠ” ì‹œì  (íš¡ìŠ¤í¬ë¡¤ ê°€ì†)',
          'ê³µê²©: ë¶€ìŠ¤í„° ì¤‘ ìë™ ì—°ì† ê³µê²© (ë¹ ë¥¸ íƒ€ê²© ì´í™íŠ¸)',
          'íƒ€ê²© ì‹œ: ë³´ìŠ¤ ë„‰ë°± + ëŒ€ë¯¸ì§€ ìˆ«ì í­ë°œ ì—°ì¶œ',
        ],
      },
    },

    // ì „íˆ¬ íë¦„
    combatFlow: [
      '1. ê³µì¤‘ì „ ì§„ì…: ë³´ìŠ¤ ë“±ì¥ ì»·ì”¬ (ë³´ìŠ¤ê°€ í•˜ëŠ˜ì—ì„œ ë‚´ë ¤ì˜´)',
      '2. ì¼ë°˜ ì „íˆ¬: íš¡ìŠ¤í¬ë¡¤ ë¹„í–‰ ì „íˆ¬ (ì¢Œìš° ì´ë™ + ìƒí•˜ íšŒí”¼)',
      '3. ë¶„ë…¸ ê²Œì´ì§€ ì¶©ì „: ê³µê²©/í”¼ê²©ìœ¼ë¡œ ê²Œì´ì§€ ì¶•ì ',
      '4. ë¶€ìŠ¤í„° ë°œë™: ê²Œì´ì§€ 100% â†’ ì›Œí”„ ì—°ì¶œ â†’ ì§ˆì£¼ ì‹œì‘',
      '5. ì¶”ê²©ì „: ë³´ìŠ¤ í›„í‡´ + ì£¼ì¸ê³µ ì¶”ê²© ê³µê²©',
      '6. ë¶€ìŠ¤í„° ì¢…ë£Œ: ì†ë„ ê°ì†Œ â†’ ì¼ë°˜ ì „íˆ¬ë¡œ ë³µê·€',
      '7. ë³´ìŠ¤ ì²˜ì¹˜ or ì¼ë°˜ì „íˆ¬ ë°˜ë³µ',
    ],

    // íŠœí† ë¦¬ì–¼ í•„ìš”
    tutorial: {
      needed: true,
      pages: [
        { title: 'ê³µì¤‘ì „!', desc: 'í•˜ëŠ˜ì—ì„œ ë‚ ì•„ë‹¤ë‹ˆëŠ” ë³´ìŠ¤ì™€ ì‹¸ì›Œë³´ì!' },
        { title: 'ì´ë™', desc: 'í„°ì¹˜/ë“œë˜ê·¸ë¡œ ìƒí•˜ì¢Œìš° ì´ë™í•˜ì—¬ ê³µê²©ì„ í”¼í•´!' },
        { title: 'ë¶€ìŠ¤í„° ì§ˆì£¼', desc: 'ë¶„ë…¸ ê²Œì´ì§€ê°€ ê°€ë“ ì°¨ë©´ ë¶€ìŠ¤í„° ë°œë™! ì—„ì²­ë‚œ ì†ë„ë¡œ ë³´ìŠ¤ë¥¼ ì¶”ê²©í•´!' },
        { title: 'ì¶”ê²© ê³µê²©', desc: 'ë¶€ìŠ¤í„° ì¤‘ì—ëŠ” ìë™ìœ¼ë¡œ ì—°ì† ê³µê²©! ë³´ìŠ¤ì—ê²Œ í° í”¼í•´ë¥¼ ì¤˜!' },
      ],
    },

    // ë¯¸ì • ì‚¬í•­ (êµ¬í˜„ ì‹œ ê²°ì •)
    // ë³´ìŠ¤ë°© ì—°ê²°: ê³µì¤‘ì „ì€ ë³´ìŠ¤ë°©(ë°°í‹€ì•„ë ˆë‚˜) ì•ˆì—ì„œ ì¹˜ë£¸
    bossRoomLink: {
      description: 'ë³´ìŠ¤ë°© ê³µê°„ì—ì„œ ë°”ë‹¥ì´ ì‚¬ë¼ì§€ê³  í•˜ëŠ˜ ë°°ê²½ìœ¼ë¡œ ì „í™˜ë˜ë©´ ê³µì¤‘ì „ ì‹œì‘',
      configRef: 'js/data/combat-config.js â†’ BOSS_ROOM_CONFIG.aerialExtension',
      backlogRef: 'boss_room',
    },

    undecided: [
      'ë¶€ìŠ¤í„° ì§€ì† ì‹œê°„',
      'ë¶€ìŠ¤í„° ì¤‘ ê³µê²©ë ¥ ë°°ìœ¨',
      'ê³µì¤‘ì „ ì§„ì… ì¡°ê±´: stage4 ë³´ìŠ¤ HP 50% ì´í•˜ (í™•ì •ë¨)',
      'ë³´ìŠ¤ë³„ íŒ¨í„´/ë‚œì´ë„',
      'ë³´ìŠ¤ ë“œë ë³´ìƒ',
      'ë¹„í–‰ ì¡°ì‘ ë°©ì‹ (í„°ì¹˜ ë“œë˜ê·¸? í‹¸íŠ¸?)',
    ],

    // ê¸°ìˆ  ìŠ¤íƒ ì˜ˆìƒ
    techStack: {
      renderer: 'Canvas (ê¸°ì¡´ ì „íˆ¬ ì‹œìŠ¤í…œ í™•ì¥)',
      particles: 'Canvas íŒŒí‹°í´ ì‹œìŠ¤í…œ (ì›Œí”„ ì´í™íŠ¸)',
      camera: 'íš¡ìŠ¤í¬ë¡¤ ì¹´ë©”ë¼ (ê¸°ì¡´ combat-engine í™•ì¥)',
      sprites: 'ë³´ìŠ¤ ìŠ¤í”„ë¼ì´íŠ¸ (ì´ëª¨ì§€ or Canvas ë“œë¡œì‰)',
    },

    createdAt: '2026-02-18',
    updatedAt: '2026-02-18',
  },

  // ============================================================
  // ë°°í‹€ ì•„ë ˆë‚˜ / ë³´ìŠ¤ë°© (Boss Room) â€” ìŠ¤í…Œì´ì§€ ë ì „íˆ¬ì¥
  // ============================================================
  boss_room: {
    id: 'boss_room',
    name: 'ë°°í‹€ ì•„ë ˆë‚˜ (ë³´ìŠ¤ë°©)',
    nameEn: 'Boss Room / Battle Arena',
    status: 'planned',
    priority: 'high',
    tags: ['boss', 'arena', 'combat', 'ë³´ìŠ¤ë°©', 'ë°°í‹€ì•„ë ˆë‚˜'],

    summary: 'ìŠ¤í…Œì´ì§€ ëì— ìœ„ì¹˜í•œ ë³´ìŠ¤ ì „ìš© ë…ë¦½ ì „íˆ¬ ê³µê°„. ì¼ë°˜ëª¹ ì „ë©¸ í›„ ë³´ìŠ¤ë°© ì§„ì… â†’ ë³´ìŠ¤ í™œì„±í™” â†’ ì „íˆ¬ â†’ ì•„ì´í…œ ìˆ˜ì§‘ â†’ ìŠ¤í…Œì´ì§€ ë§ˆë¬´ë¦¬',

    // ì„¤ê³„ ë¬¸ì„œ ìœ„ì¹˜
    configRef: 'js/data/combat-config.js â†’ BOSS_ROOM_CONFIG',

    // í•µì‹¬ íë¦„
    flow: [
      '1. ì¼ë°˜ ì„œë°”ì´ë²Œ ì „íˆ¬ (ì›¨ì´ë¸Œ ì²˜ì¹˜)',
      '2. ëª¨ë“  ì¼ë°˜ëª¹ ì „ë©¸ â†’ ë³´ìŠ¤ë°© ì…êµ¬(ğŸšª) í™œì„±í™”',
      '3. í”Œë ˆì´ì–´ê°€ ì…êµ¬ì— ë‹¿ìœ¼ë©´ ë³´ìŠ¤ë°© ì§„ì…',
      '4. ë³´ìŠ¤ë°© ì „ê²½ í‘œì‹œ (1ì´ˆ) â†’ ë³´ìŠ¤ ê¹¨ì–´ë‚¨ ì—°ì¶œ (2ì´ˆ)',
      '5. ë³´ìŠ¤ í™œì„±í™” â†’ ì „íˆ¬ ì‹œì‘',
      '6. ë³´ìŠ¤ ì²˜ì¹˜ â†’ í­ë°œ ì—°ì¶œ â†’ ì•„ì´í…œ ìŸì•„ì§',
      '7. ì•„ì´í…œ ìë™ ìˆ˜ì§‘ â†’ ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´',
    ],

    // êµ¬ì„± ìš”ì†Œ
    components: {
      arena: 'ì¶•êµ¬ì¥ê¸‰ ë„“ì€ ë…ë¦½ ê³µê°„ (1200Ã—800)',
      gate: 'ë³´ìŠ¤ë°© ì…êµ¬ ê²Œì´íŠ¸ (ì¼ë°˜ëª¹ ì „ë©¸ ì‹œ í™œì„±)',
      bossActivation: 'ë³´ìŠ¤ ë¹„í™œì„±â†’ê¹¨ì–´ë‚¨â†’í™œì„± ì‹œí€€ìŠ¤',
      bossHpBar: 'ìƒë‹¨ ê³ ì • ë³´ìŠ¤ HPë°” (ë‹¨ê³„ë³„ ìƒ‰ìƒ)',
      obstacles: 'ì¥ì• ë¬¼ (ê¸°ë‘¥, ìˆ˜ì •, ë²„ì„¯)',
      floorEffects: 'ë°”ë‹¥ íš¨ê³¼ (ë…, ë¶ˆ, ì¹˜ìœ )',
      orbs: 'ì•„ì´í…œ ì˜¤ë¸Œ (ì¹˜ìœ , ë¶„ë…¸, ì†ë„)',
      victorySequence: 'ë³´ìŠ¤ ì²˜ì¹˜ í›„ ì—°ì¶œ + ì•„ì´í…œ ìˆ˜ì§‘',
    },

    // ê³µì¤‘ì „ ì—°ê²°
    aerialCombatLink: {
      description: 'ê³µì¤‘ì „ë„ ì´ ë³´ìŠ¤ë°© ê³µê°„ì—ì„œ ì¹˜ë£¸. ë°”ë‹¥ ì‚¬ë¼ì§€ê³  í•˜ëŠ˜ ë°°ê²½ìœ¼ë¡œ ì „í™˜.',
      backlogRef: 'aerial_combat',
      trigger: 'stage4 ë³´ìŠ¤ HP 50% ì´í•˜ ì‹œ ë³´ìŠ¤ë°©ì´ í•˜ëŠ˜ ì „íˆ¬ì¥ìœ¼ë¡œ ì „í™˜',
    },

    undecided: [
      'ë³´ìŠ¤ë³„ ê³ ìœ  ìŠ¤í‚¬ íŒ¨í„´ ìƒì„¸',
      'ì¥ì• ë¬¼ ë°°ì¹˜ ë¡œì§ (ëœë¤? ê³ ì •?)',
      'ë³´ìŠ¤ë°© ì…ì¥ ì‹œ ì²´ë ¥ íšŒë³µ ì—¬ë¶€',
      'ë³´ìŠ¤ ë¶„ë…¸ ëª¨ë“œ ìƒì„¸ í–‰ë™ íŒ¨í„´',
    ],

    createdAt: '2026-02-18',
    updatedAt: '2026-02-18',
  },

};

// ============================================================
// ë°±ë¡œê·¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
// ============================================================

// í‚¤ì›Œë“œë¡œ ë°±ë¡œê·¸ ê²€ìƒ‰
export function findBacklogByKeyword(keyword) {
  const kw = keyword.toLowerCase();
  return Object.values(CONTENT_BACKLOG).filter(item => {
    if (item.name.includes(keyword)) return true;
    if (item.nameEn.toLowerCase().includes(kw)) return true;
    if (item.tags.some(t => t.includes(kw))) return true;
    if (item.summary.includes(keyword)) return true;
    return false;
  });
}

// IDë¡œ ë°±ë¡œê·¸ ì¡°íšŒ
export function getBacklogById(id) {
  return CONTENT_BACKLOG[id] || null;
}

// ìƒíƒœë³„ ë°±ë¡œê·¸ ëª©ë¡
export function getBacklogByStatus(status) {
  return Object.values(CONTENT_BACKLOG).filter(item => item.status === status);
}

// ë°±ë¡œê·¸ ìƒíƒœ ì—…ë°ì´íŠ¸ (ëŸ°íƒ€ì„ ì „ìš©, ì‹¤ì œ ì €ì¥ì€ ì½”ë“œ ìˆ˜ì • í•„ìš”)
export function updateBacklogStatus(id, newStatus) {
  if (CONTENT_BACKLOG[id]) {
    CONTENT_BACKLOG[id].status = newStatus;
    CONTENT_BACKLOG[id].updatedAt = new Date().toISOString().split('T')[0];
  }
}
