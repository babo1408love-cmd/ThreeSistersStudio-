.candy-scene {
  text-align: center;
}

.candy-scene .scene-title { color: var(--pink); }

/* ì´ë™ ì™„ë£Œ/ì´ë²¤íŠ¸ ì˜ì—­ â€” í•˜ë‹¨ ê³ ì • */
.move-done-sticky {
  position: sticky;
  bottom: 0;
  z-index: 100;
  padding: 12px 8px;
  margin-top: 8px;
  background: linear-gradient(to top, rgba(10, 10, 15, 0.95) 60%, rgba(10, 10, 15, 0) 100%);
}

.move-done-sticky:empty {
  display: none;
}

/* Board wrapper */
.candy-board-wrapper {
  display: inline-grid;
  gap: 2px;
  justify-content: center;
  margin-bottom: var(--gap-md);
  position: relative;
  user-select: none;
  touch-action: none;
}

/* Collected item badges */
.collected-item-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--slot-size);
  height: var(--slot-size);
  font-size: var(--icon-md);
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  animation: fadeIn 0.3s ease-out;
}

/* Candy cells (inner grid) */
.candy-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--icon-lg);
  cursor: grab;
  border-radius: 6px;
  background: var(--bg-card);
  border: 2px solid var(--border-subtle);
  transition: background 0.1s, border-color 0.1s, transform 0.1s, box-shadow 0.1s;
  user-select: none;
  touch-action: none;
}

.candy-cell:hover {
  background: rgba(40, 40, 60, 0.8);
  border-color: var(--border-glow);
}

.candy-cell:active {
  cursor: grabbing;
}

/* P&D: cell where gem was picked up (empty) */
.candy-cell.pad-empty {
  background: rgba(245, 194, 231, 0.15);
  border: 2px dashed var(--pink);
  box-shadow: 0 0 8px rgba(245, 194, 231, 0.3) inset;
}

/* P&D: trail cells (path the gem traveled) */
.candy-cell.trail {
  background: rgba(245, 194, 231, 0.12);
  border-color: rgba(245, 194, 231, 0.35);
  position: relative;
}

.candy-cell.trail::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 6px;
  background: var(--pink);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  opacity: 0.5;
}

/* Special tile (ë§¤ì¹˜ë¡œ ìƒì„±ëœ íŠ¹ìˆ˜ íƒ€ì¼) */
.candy-cell.special-tile {
  background: rgba(251, 191, 36, 0.2);
  border: 2px solid rgba(251, 191, 36, 0.6);
  box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
  animation: specialTilePulse 1s ease-in-out infinite alternate;
}

@keyframes specialTilePulse {
  0% { box-shadow: 0 0 6px rgba(251, 191, 36, 0.3); transform: scale(1); }
  100% { box-shadow: 0 0 14px rgba(251, 191, 36, 0.7); transform: scale(1.05); }
}

/* Special orb (ë“œë˜ê·¸ ì‹œ) */
.pad-floating-orb.special-orb {
  filter: drop-shadow(0 0 12px rgba(251, 191, 36, 0.9));
  animation: padOrbPulse 0.3s ease-in-out infinite alternate,
             specialOrbGlow 0.5s ease-in-out infinite alternate;
}

@keyframes specialOrbGlow {
  from { filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.6)); }
  to { filter: drop-shadow(0 0 16px rgba(251, 191, 36, 1)); }
}

/* Match explosion animation */
.candy-cell.exploding {
  animation: gemExplode 0.44s ease-out forwards;
  pointer-events: none;
  z-index: 2;
}

@keyframes gemExplode {
  0% { transform: scale(1); opacity: 1; }
  20% { transform: scale(1.4); filter: brightness(2) saturate(2); }
  50% { transform: scale(0.6) rotate(15deg); opacity: 0.6; }
  100% { transform: scale(0); opacity: 0; filter: brightness(3); }
}

/* Gravity fall animation */
.candy-cell.gem-falling {
  animation: gemFall 0.33s ease-in;
}

@keyframes gemFall {
  from { transform: translateY(-42px); opacity: 0.6; }
  to { transform: translateY(0); opacity: 1; }
}

/* New tile appearing from top */
.candy-cell.gem-new {
  animation: gemNew 0.33s ease-out;
}

@keyframes gemNew {
  0% { transform: translateY(-42px) scale(0.3); opacity: 0; }
  60% { transform: translateY(-5px) scale(1.1); opacity: 0.9; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}

/* Cleared cell (empty after explosion, before gravity) */
.candy-cell.gem-cleared {
  background: rgba(255, 255, 255, 0.03);
  border: 2px dashed rgba(100, 100, 120, 0.15);
}

/* Fly to inventory animation */
.fly-to-inventory {
  position: fixed;
  font-size: clamp(20px, 6vw, 28px);
  z-index: 2000;
  pointer-events: none;
  filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));
  transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1),
              opacity 0.7s ease-in;
}

.fly-to-inventory.fly-active {
  opacity: 0;
}

/* Spirit reward popup */
.spirit-reward-popup {
  position: fixed;
  left: 50%;
  top: 40%;
  transform: translate(-50%, -50%) scale(0);
  background: var(--bg-card);
  border: 2px solid var(--gold);
  border-radius: 12px;
  padding: 16px 24px;
  z-index: 1500;
  text-align: center;
  box-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
  animation: rewardPopIn 0.5s ease-out forwards;
}

@keyframes rewardPopIn {
  0% { transform: translate(-50%, -50%) scale(0) rotate(-10deg); }
  60% { transform: translate(-50%, -50%) scale(1.1) rotate(2deg); }
  100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

.candy-cell.matched { animation: pop 0.44s forwards; }

/* P&D: Floating orb following cursor (ì ˆë°˜ í¬ê¸°) */
.pad-floating-orb {
  position: fixed;
  width: var(--icon-lg);
  height: var(--icon-lg);
  font-size: var(--icon-md);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 1000;
  filter: drop-shadow(0 0 6px rgba(245, 194, 231, 0.8));
  animation: padOrbPulse 0.4s ease-in-out infinite alternate;
  transform: scale(1.0);
}

@keyframes padOrbPulse {
  from { transform: scale(0.95); filter: drop-shadow(0 0 4px rgba(245, 194, 231, 0.6)); }
  to { transform: scale(1.1); filter: drop-shadow(0 0 8px rgba(245, 194, 231, 1)); }
}

/* P&D: Drag time limit bar */
.pad-drag-timer {
  width: 200px;
  height: 6px;
  background: rgba(255,255,255,0.1);
  border-radius: 3px;
  margin: 0 auto 8px;
  overflow: hidden;
}

.pad-drag-timer-fill {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, #ff6b6b, #fbbf24, #86efac);
  border-radius: 3px;
  transition: width 0.05s linear;
}


/* ====================================================
   Board Equipment Slots â€” ì‹ ì²´ ë¶€ìœ„ë³„ ì¥ë¹„ (ì¢Œì¸¡ 6ì¹¸)
   ==================================================== */

.board-equip-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1px;
  font-size: clamp(14px, 4vw, 18px);
  border-radius: 8px;
  background: rgba(30, 35, 55, 0.9);
  border: 2px solid rgba(103, 232, 249, 0.4);
  user-select: none;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.board-equip-slot:hover {
  border-color: rgba(103, 232, 249, 0.8);
  background: rgba(40, 50, 70, 0.95);
  transform: scale(1.08);
  box-shadow: 0 0 10px rgba(103, 232, 249, 0.4);
}

.equip-slot-emoji {
  font-size: var(--icon-md);
  filter: drop-shadow(0 1px 3px rgba(0,0,0,0.5));
}

.equip-slot-empty {
  font-size: var(--icon-md);
  opacity: 0.35;
  filter: grayscale(0.3);
}

.equip-slot-label {
  font-size: var(--label-xs);
  font-weight: 600;
  color: rgba(200, 220, 240, 0.6);
  line-height: 1;
  letter-spacing: 0.5px;
}

/* ====================================================
   Board Hero Slots (ìš°ì¸¡ 6ì¹¸)
   ==================================================== */

.board-hero-slot {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(14px, 4vw, 18px);
  border-radius: 8px;
  background: rgba(40, 25, 55, 0.9);
  border: 2px solid rgba(155, 138, 255, 0.4);
  user-select: none;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.board-hero-slot:hover {
  border-color: rgba(155, 138, 255, 0.8);
  background: rgba(55, 35, 75, 0.95);
  transform: scale(1.05);
  box-shadow: 0 0 8px rgba(155, 138, 255, 0.3);
}

.board-hero-slot.slot-locked {
  opacity: 0.3;
  cursor: default;
  border-style: dashed;
}

.board-hero-slot.slot-locked:hover {
  transform: none;
  box-shadow: none;
}

.hero-slot-emoji {
  font-size: var(--icon-md);
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.hero-slot-empty {
  font-size: var(--icon-sm);
  opacity: 0.4;
}

.hero-slot-locked {
  font-size: var(--icon-sm);
  opacity: 0.6;
}

/* ì˜ì›… ìŠ¬ë¡¯ ì†ì„± ë±ƒì§€ (ìš°í•˜ë‹¨) */
.hero-slot-attr-badge {
  position: absolute;
  bottom: 1px;
  right: 2px;
  font-size: var(--icon-xs);
  line-height: 1;
  pointer-events: none;
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.6));
}

/* ====================================================
   Board Pet Slot (í« ì¥ì°© ìŠ¬ë¡¯ â€” [10,6])
   ==================================================== */

.board-pet-slot {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(14px, 4vw, 18px);
  border-radius: 8px;
  background: rgba(25, 50, 35, 0.9);
  border: 2px solid rgba(134, 239, 172, 0.5);
  user-select: none;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.board-pet-slot:hover {
  border-color: rgba(134, 239, 172, 0.8);
  background: rgba(35, 65, 45, 0.95);
  transform: scale(1.05);
  box-shadow: 0 0 8px rgba(134, 239, 172, 0.3);
}

.board-pet-slot.slot-locked {
  opacity: 0.3;
  cursor: default;
  border-style: dashed;
}

.board-pet-slot.slot-locked:hover {
  transform: none;
  box-shadow: none;
}

.pet-slot-emoji {
  font-size: var(--icon-md);
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.pet-slot-empty {
  font-size: var(--icon-sm);
  opacity: 0.5;
}

.pet-slot-locked {
  font-size: var(--icon-sm);
  opacity: 0.6;
}

/* ====================================================
   Slot Detail Popup (ì•„ì´í…œ/ì˜ì›… ìƒì„¸ íŒì—…)
   ==================================================== */

.slot-detail-popup {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: var(--bg-card);
  border: 2px solid var(--border-glow);
  border-radius: 12px;
  padding: clamp(12px, 3.5vw, 18px) clamp(14px, 4vw, 22px);
  z-index: 1600;
  min-width: clamp(180px, 50vw, 220px);
  max-width: clamp(240px, 70vw, 300px);
  text-align: center;
  box-shadow: 0 0 30px rgba(155, 138, 255, 0.3);
  animation: slotPopIn 0.3s ease-out forwards;
}

@keyframes slotPopIn {
  0% { transform: translate(-50%, -50%) scale(0); }
  70% { transform: translate(-50%, -50%) scale(1.05); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

.slot-detail-header {
  display: flex;
  align-items: center;
  gap: clamp(6px, 2vw, 10px);
  justify-content: center;
  padding-bottom: clamp(6px, 1.5vw, 8px);
  margin-bottom: clamp(6px, 1.5vw, 8px);
}

.slot-detail-stats {
  font-size: var(--label-md);
  color: var(--text-secondary);
  margin: 6px 0;
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}

.slot-detail-stats span {
  background: rgba(103, 232, 249, 0.15);
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
}

.slot-detail-skill {
  margin: clamp(4px, 1vw, 6px) 0;
  padding: clamp(3px, 1vw, 5px) clamp(6px, 2vw, 10px);
  background: rgba(0,0,0,0.2);
  border-radius: 6px;
}

/* ====================================================
   ë§¤ì¹˜ ë‹¨ê³„ë³„ ì—°ì¶œ ì‹œìŠ¤í…œ
   ==================================================== */

/* ë§¤ì¹˜ íŒŒí‹°í´ (ë°©ì‚¬í˜• í­ë°œ) */
.match-tier-particle {
  position: fixed;
  z-index: 2100;
  pointer-events: none;
  font-size: clamp(15px, 4.5vw, 20px);
  transform: translate(-50%, -50%);
  animation: matchTierBurst 0.7s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes matchTierBurst {
  0% { transform: translate(-50%, -50%) scale(0.3); opacity: 1; }
  30% { transform: translate(calc(-50% + var(--tx) * 0.4), calc(-50% + var(--ty) * 0.4)) scale(1.2); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.2); opacity: 0; }
}

.match-tier-emoji {
  font-size: var(--icon-lg);
}

/* ë§¤ì¹˜ í™”ë©´ í”ë“¤ë¦¼ */
.match-tier-shake {
  animation: matchShake 0.3s ease-in-out !important;
}

@keyframes matchShake {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-3px, 2px); }
  40% { transform: translate(4px, -3px); }
  60% { transform: translate(-4px, 3px); }
  80% { transform: translate(3px, -2px); }
}

/* ë§¤ì¹˜ í™”ë©´ í”Œë˜ì‹œ */
.match-tier-flash {
  position: fixed;
  inset: 0;
  z-index: 2000;
  pointer-events: none;
  animation: matchFlash 0.5s ease-out forwards;
}

@keyframes matchFlash {
  0% { opacity: 0; }
  20% { opacity: 0.8; }
  100% { opacity: 0; }
}

/* ====================================================
   ë§¤ì¹˜ ì‹œ ì •ë ¹ íŒŒì¸  ë“œë ì—°ì¶œ
   ==================================================== */

/* íŒŒì¸  ë“œë ì•„ì´ì½˜ */
.match-drop-spirit {
  position: fixed;
  z-index: 2300;
  pointer-events: none;
  font-size: var(--icon-lg);
  display: flex;
  align-items: center;
  gap: 3px;
  padding: 6px 10px;
  background: rgba(20, 20, 35, 0.85);
  border: 2px solid;
  border-radius: 12px;
  transform: translate(-50%, -50%) scale(0);
  animation: matchDropAppear 0.3s ease-out forwards;
  transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s ease-in;
}

.match-drop-part {
  font-size: var(--icon-sm);
}

@keyframes matchDropAppear {
  0% { transform: translate(-50%, -50%) scale(0) rotate(-10deg); }
  60% { transform: translate(-50%, -50%) scale(1.2) rotate(3deg); }
  100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

/* ë– ì˜¤ë¥´ê¸° */
.match-drop-spirit.match-drop-float {
  animation: matchDropFloat 0.4s ease-out forwards;
}

@keyframes matchDropFloat {
  0% { transform: translate(-50%, -50%) scale(1); }
  100% { transform: translate(-50%, calc(-50% - 40px)) scale(1.1);
         filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.6)); }
}

/* ì¸ë²¤í† ë¦¬ë¡œ ë¹„í–‰ */
.match-drop-spirit.match-drop-fly {
  animation: none;
  transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s ease-in;
}

/* ====================================================
   ì˜ì›… ì¤‘ë³µ ì¥ì°© ë©”ì‹œì§€ ì‹œìŠ¤í…œ
   ==================================================== */

/* ìƒì„¸ íŒì—… ë‚´ ì¤‘ë³µ ê·œì¹™ ë±ƒì§€ */
.dup-rule-badge {
  font-size: var(--label-xs);
  padding: 4px 10px;
  border-radius: 12px;
  margin: 6px 0;
  font-weight: 600;
}

.dup-rule-badge.dup-restricted {
  background: rgba(255, 107, 107, 0.15);
  border: 1px solid rgba(255, 107, 107, 0.4);
  color: #ff6b6b;
}

.dup-rule-badge.dup-free {
  background: rgba(134, 239, 172, 0.15);
  border: 1px solid rgba(134, 239, 172, 0.4);
  color: #86efac;
}

/* ê°™ì€ ë“±ê¸‰ ì¥ì°© ì¤‘ ëª©ë¡ */
.dup-occupied-list {
  margin: 6px 0;
  padding: 6px 8px;
  background: rgba(0,0,0,0.2);
  border-radius: 8px;
}

.dup-occupied-chip {
  display: inline-block;
  font-size: var(--label-md);
  padding: 2px 8px;
  border-radius: 10px;
  margin: 2px;
  background: rgba(155, 138, 255, 0.1);
  border: 1px solid rgba(155, 138, 255, 0.3);
}

.dup-occupied-chip.dup-conflict {
  background: rgba(255, 107, 107, 0.2);
  border-color: rgba(255, 107, 107, 0.5);
  color: #ff6b6b;
  font-weight: 700;
  animation: dupConflictPulse 0.8s ease-in-out infinite alternate;
}

@keyframes dupConflictPulse {
  from { box-shadow: 0 0 4px rgba(255, 107, 107, 0.3); }
  to { box-shadow: 0 0 10px rgba(255, 107, 107, 0.6); }
}

/* ì¤‘ë³µ ê²½ê³  íŒì—… (ì „ì²´í™”ë©´ ì„¼í„°) */
.dup-warning-popup {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: linear-gradient(135deg, rgba(40, 20, 30, 0.97), rgba(50, 25, 25, 0.97));
  border: 2px solid rgba(255, 107, 107, 0.6);
  border-radius: 16px;
  padding: 20px 24px;
  z-index: 2000;
  min-width: 260px;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 0 40px rgba(255, 107, 107, 0.3), inset 0 1px 0 rgba(255, 107, 107, 0.15);
  animation: dupWarningIn 0.4s ease-out forwards;
}

@keyframes dupWarningIn {
  0% { transform: translate(-50%, -50%) scale(0) rotate(-5deg); }
  60% { transform: translate(-50%, -50%) scale(1.05) rotate(1deg); }
  100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

.dup-warning-icon {
  font-size: var(--icon-xl);
  margin-bottom: 6px;
  animation: dupWarningShake 0.4s ease-in-out;
}

@keyframes dupWarningShake {
  0%, 100% { transform: rotate(0); }
  25% { transform: rotate(-10deg); }
  75% { transform: rotate(10deg); }
}

.dup-warning-title {
  font-size: clamp(14px, 4vw, 18px);
  font-weight: 800;
  color: #ff6b6b;
  margin-bottom: 10px;
}

.dup-warning-body {
  margin-bottom: 12px;
}

.dup-warning-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 10px;
}

.dup-warning-hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 12px;
  background: rgba(0,0,0,0.3);
  border: 2px solid;
  border-radius: 10px;
  font-size: var(--icon-lg);
  min-width: 70px;
}

.dup-warning-vs {
  font-size: clamp(18px, 5vw, 22px);
  color: #ff6b6b;
  animation: dupVsPulse 0.6s ease-in-out infinite alternate;
}

@keyframes dupVsPulse {
  from { transform: scale(1); opacity: 0.6; }
  to { transform: scale(1.3); opacity: 1; }
}

.dup-warning-reason {
  font-size: var(--label-md);
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: 8px;
}

.dup-warning-hint {
  font-size: var(--label-md);
  color: var(--gold);
  padding: 4px 10px;
  background: rgba(251, 191, 36, 0.1);
  border: 1px solid rgba(251, 191, 36, 0.3);
  border-radius: 8px;
  display: inline-block;
}

/* ====================================================
   Rage Gauge Bar (ë¶„ë…¸ ê²Œì´ì§€)
   ==================================================== */

.rage-gauge-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
  margin: 4px auto 6px;
  max-width: 220px;
}

.rage-icon {
  font-size: var(--icon-md);
  min-width: var(--icon-lg);
  text-align: center;
  transition: all 0.3s;
}

.rage-icon.rage-full-pulse {
  animation: ragePulse 0.4s ease-in-out infinite alternate;
  filter: drop-shadow(0 0 6px #ff3333);
}

@keyframes ragePulse {
  from { transform: scale(1); }
  to { transform: scale(1.25); }
}

.rage-track {
  flex: 1;
  height: 10px;
  background: rgba(255,255,255,0.08);
  border-radius: 5px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.1);
}

.rage-fill {
  height: 100%;
  border-radius: 5px;
  transition: width 0.3s ease, background 0.3s ease;
  box-shadow: 0 0 6px currentColor;
}

.rage-label {
  font-size: var(--label-md);
  font-weight: 700;
  min-width: 32px;
  text-align: right;
  color: var(--text-secondary);
}

/* Rage Flash (ìŠ¤í‚¬ ë°œë™ ì‹œ í™”ë©´ í”Œë˜ì‹œ) */
.rage-flash {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, rgba(255,248,184,0.6), rgba(255,248,184,0) 70%);
  z-index: 2000;
  pointer-events: none;
  animation: rageFlash 0.8s ease-out forwards;
}

@keyframes rageFlash {
  0% { opacity: 0; }
  15% { opacity: 1; }
  100% { opacity: 0; }
}

/* ====================================================
   ë¶„ë…¸ ìŠ¤í‚¬ ì—°ì¶œ ì‹œìŠ¤í…œ
   ==================================================== */

/* ì£¼ì¸ê³µ ë¹„í–‰ ì—˜ë¦¬ë¨¼íŠ¸ */
.rage-fly-hero {
  position: fixed;
  z-index: 2500;
  font-size: clamp(26px, 7vw, 36px);
  pointer-events: none;
  transform: translate(-50%, -50%) scale(1);
  transition: none;
  filter: drop-shadow(0 0 12px rgba(255, 200, 50, 0.8));
}

.rage-fly-hero.rage-fly-to-center {
  transition: left 0.4s cubic-bezier(0.2, 0.8, 0.3, 1),
              top 0.4s cubic-bezier(0.2, 0.8, 0.3, 1),
              transform 0.4s ease-out;
  transform: translate(-50%, -50%) scale(1.6);
  filter: drop-shadow(0 0 24px rgba(255, 200, 50, 1));
}

.rage-fly-hero.rage-hero-impact {
  animation: rageHeroImpact 0.6s ease-in-out;
}

@keyframes rageHeroImpact {
  0% { transform: translate(-50%, -50%) scale(1.6); }
  30% { transform: translate(-50%, -50%) scale(2.2) rotate(10deg); }
  60% { transform: translate(-50%, -50%) scale(1.8) rotate(-5deg); }
  100% { transform: translate(-50%, -50%) scale(1.6); }
}

.rage-fly-hero.rage-fly-return {
  transition: left 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              top 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.35s ease-in;
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 0 8px rgba(255, 200, 50, 0.4));
}

/* ìŠ¬ë¡¯ ì˜ì›… ì—˜ë¦¬ë¨¼íŠ¸ */
.rage-fly-slot-hero {
  position: fixed;
  z-index: 2400;
  pointer-events: none;
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 0 6px rgba(155, 138, 255, 0.6));
  transition: none;
}

.rage-fly-slot-hero.rage-slot-burst {
  animation: rageSlotBurst 0.5s cubic-bezier(0.2, 0.8, 0.3, 1);
}

@keyframes rageSlotBurst {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  40% { transform: translate(-50%, -50%) scale(1.8); opacity: 1;
        filter: drop-shadow(0 0 20px rgba(255, 200, 50, 0.9)); }
  70% { transform: translate(-50%, -50%) scale(1.5); }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

.rage-fly-slot-hero.rage-slot-return {
  transition: transform 0.3s ease-in, filter 0.3s ease-in;
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 0 4px rgba(155, 138, 255, 0.3));
}

/* ì„íŒ©íŠ¸ í­ë°œ ë§ */
.rage-impact-ring {
  position: fixed;
  z-index: 2300;
  pointer-events: none;
  width: 0;
  height: 0;
  border-radius: 50%;
  border: 3px solid rgba(255, 220, 80, 0.8);
  transform: translate(-50%, -50%);
  animation: rageRingExpand 0.8s ease-out forwards;
  box-shadow: 0 0 20px rgba(255, 200, 50, 0.4), inset 0 0 20px rgba(255, 200, 50, 0.2);
}

@keyframes rageRingExpand {
  0% { width: 0; height: 0; opacity: 1; border-width: 4px; }
  100% { width: 300px; height: 300px; opacity: 0; border-width: 1px; }
}

/* ì„íŒ©íŠ¸ ì´ëª¨ì§€ íŒŒí¸ */
.rage-impact-fragment {
  position: fixed;
  z-index: 2350;
  pointer-events: none;
  font-size: clamp(18px, 5vw, 22px);
  transform: translate(-50%, -50%);
  animation: rageFragBurst 0.9s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes rageFragBurst {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
  30% { transform: translate(calc(-50% + var(--tx) * 0.4), calc(-50% + var(--ty) * 0.4)) scale(1.2); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.3); opacity: 0; }
}

/* í™”ë©´ í”ë“¤ê¸° */
.rage-screen-shake {
  animation: rageShake 0.3s ease-in-out !important;
}

@keyframes rageShake {
  0%, 100% { transform: translate(0); }
  10% { transform: translate(-4px, 2px); }
  20% { transform: translate(5px, -3px); }
  30% { transform: translate(-6px, 4px); }
  40% { transform: translate(4px, -2px); }
  50% { transform: translate(-3px, 5px); }
  60% { transform: translate(6px, -4px); }
  70% { transform: translate(-4px, 3px); }
  80% { transform: translate(3px, -5px); }
  90% { transform: translate(-2px, 4px); }
}

/* ìº”ë”” íƒ€ì¼ ë¶„ë…¸ ì œê±° ì• ë‹ˆë©”ì´ì…˜ */
.rage-tile-explode {
  animation: rageTileExplode 0.5s ease-out forwards !important;
  pointer-events: none !important;
}

@keyframes rageTileExplode {
  0% { transform: scale(1); opacity: 1; background: rgba(255, 220, 80, 0.4); }
  30% { transform: scale(1.3); opacity: 1; background: rgba(255, 220, 80, 0.8);
        box-shadow: 0 0 12px rgba(255, 200, 50, 0.6); }
  100% { transform: scale(0); opacity: 0; }
}

/* ====================================================
   í« ì¹˜ìœ  ê²Œì´ì§€ ë°”
   ==================================================== */

.pet-heal-gauge-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
  margin: 2px auto 6px;
  max-width: 220px;
}

.pet-heal-icon {
  font-size: var(--icon-md);
  min-width: var(--icon-lg);
  text-align: center;
  transition: all 0.3s;
}

.pet-heal-icon.heal-full-pulse {
  animation: healPulse 0.4s ease-in-out infinite alternate;
  filter: drop-shadow(0 0 6px #22c55e);
}

@keyframes healPulse {
  from { transform: scale(1); }
  to { transform: scale(1.25); }
}

.pet-heal-track {
  flex: 1;
  height: 8px;
  background: rgba(255,255,255,0.08);
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.1);
}

.pet-heal-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease, background 0.3s ease;
  box-shadow: 0 0 6px currentColor;
}

.pet-heal-label {
  font-size: var(--label-xs);
  font-weight: 700;
  min-width: 28px;
  text-align: right;
  color: var(--text-secondary);
}

/* ====================================================
   í« ì¹˜ìœ  ìŠ¤í‚¬ ì—°ì¶œ
   ==================================================== */

/* í« ë¹„í–‰ ì—˜ë¦¬ë¨¼íŠ¸ */
.pet-fly-heal {
  position: fixed;
  z-index: 2500;
  font-size: var(--icon-lg);
  pointer-events: none;
  transform: translate(-50%, -50%) scale(1);
  transition: none;
  filter: drop-shadow(0 0 12px rgba(134, 239, 172, 0.8));
}

.pet-fly-heal.pet-fly-to-center {
  transition: left 0.35s cubic-bezier(0.2, 0.8, 0.3, 1),
              top 0.35s cubic-bezier(0.2, 0.8, 0.3, 1),
              transform 0.35s ease-out;
  transform: translate(-50%, -50%) scale(1.5);
  filter: drop-shadow(0 0 20px rgba(134, 239, 172, 1));
}

.pet-fly-heal.pet-heal-impact {
  animation: petHealImpact 0.5s ease-in-out;
}

@keyframes petHealImpact {
  0% { transform: translate(-50%, -50%) scale(1.5); }
  30% { transform: translate(-50%, -50%) scale(2.0) rotate(5deg); }
  60% { transform: translate(-50%, -50%) scale(1.7) rotate(-3deg); }
  100% { transform: translate(-50%, -50%) scale(1.5); }
}

.pet-fly-heal.pet-fly-return {
  transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              top 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s ease-in;
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 0 6px rgba(134, 239, 172, 0.3));
}

/* ì¹˜ìœ  íŒŒë™ ë§ (ì´ˆë¡ë¹›) */
.pet-heal-ring {
  position: fixed;
  z-index: 2300;
  pointer-events: none;
  width: 0;
  height: 0;
  border-radius: 50%;
  border: 3px solid rgba(134, 239, 172, 0.7);
  transform: translate(-50%, -50%);
  animation: healRingExpand 0.8s ease-out forwards;
  box-shadow: 0 0 20px rgba(134, 239, 172, 0.4), inset 0 0 20px rgba(134, 239, 172, 0.2);
}

@keyframes healRingExpand {
  0% { width: 0; height: 0; opacity: 1; border-width: 4px; }
  100% { width: 250px; height: 250px; opacity: 0; border-width: 1px; }
}

/* ì¹˜ìœ  íŒŒí‹°í´ ì´ëª¨ì§€ */
.pet-heal-particle {
  position: fixed;
  z-index: 2350;
  pointer-events: none;
  font-size: clamp(15px, 4.5vw, 20px);
  transform: translate(-50%, -50%);
  animation: healParticleFloat 1s ease-out forwards;
}

@keyframes healParticleFloat {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
  40% { transform: translate(calc(-50% + var(--tx) * 0.5), calc(-50% + var(--ty) * 0.5)) scale(1.1); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty) - 30px)) scale(0.4); opacity: 0; }
}

/* ì¹˜ìœ  í™”ë©´ í”Œë˜ì‹œ (ì´ˆë¡ë¹›) */
.pet-heal-flash {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, rgba(220, 252, 231, 0.5), rgba(220, 252, 231, 0) 70%);
  z-index: 2000;
  pointer-events: none;
  animation: healFlash 0.6s ease-out forwards;
}

@keyframes healFlash {
  0% { opacity: 0; }
  15% { opacity: 1; }
  100% { opacity: 0; }
}

/* HP íšŒë³µ ìˆ«ì ë– ì˜¤ë¥´ê¸° */
.heal-number-float {
  position: fixed;
  z-index: 2400;
  pointer-events: none;
  font-size: clamp(18px, 5vw, 22px);
  font-weight: 900;
  color: #22c55e;
  text-shadow: 0 0 8px rgba(34, 197, 94, 0.6);
  animation: healNumberFloat 1.2s ease-out forwards;
}

@keyframes healNumberFloat {
  0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }
  20% { transform: translate(-50%, -10px) scale(1.3); opacity: 1; }
  100% { transform: translate(-50%, -50px) scale(0.8); opacity: 0; }
}

/* ====================================================
   ì™¸í˜• ë³€ê²½ ì—°ì¶œ
   ==================================================== */

.appearance-change-flash {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 10;
  animation: appearanceFlash 0.6s ease-out forwards;
}

@keyframes appearanceFlash {
  0% { background: rgba(255, 215, 0, 0); transform: scale(0.8); }
  30% { background: rgba(255, 215, 0, 0.4); transform: scale(1.2); }
  60% { background: rgba(255, 215, 0, 0.1); transform: scale(1.0); }
  100% { background: rgba(255, 215, 0, 0); transform: scale(1.0); }
}

.appearance-sparkle {
  position: absolute;
  font-size: var(--label-lg);
  pointer-events: none;
  z-index: 11;
  animation: appearanceSparkle 0.8s ease-out forwards;
}

@keyframes appearanceSparkle {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  40% { transform: translate(calc(-50% + var(--sx)), calc(-50% + var(--sy))) scale(1.2); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--sx) * 1.5), calc(-50% + var(--sy) * 1.5 - 10px)) scale(0); opacity: 0; }
}


/* ====================================================
   ì•„ì´í…œ ìì„ í¡ìˆ˜ ì—°ì¶œ
   ==================================================== */

.magnet-pull-item {
  position: fixed;
  font-size: clamp(18px, 5.5vw, 24px);
  z-index: 2000;
  pointer-events: none;
  filter: drop-shadow(0 0 8px rgba(103, 232, 249, 0.8));
  transition: transform 0.2s ease-out, opacity 0.2s;
  opacity: 0.9;
}

/* ====================================================
   ë¯¸ë¯¹ ì´ë²¤íŠ¸ UI
   ==================================================== */

.mimic-event {
  text-align: center;
  padding: 12px;
  background: rgba(251, 191, 36, 0.1);
  border: 2px solid var(--gold);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.2);
}

/* ====================================================
   í™©ê¸ˆ ë¯¸ë¯¹ íŠœí† ë¦¬ì–¼ (ë§ˆë¸” ë³´ë“œ ì¸ë¼ì¸)
   ==================================================== */

/* ë¯¸ë¯¹ íƒ€ì¼ ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ â€” íŠœí† ë¦¬ì–¼ ì§„í–‰ ì¤‘ ê°•ì¡° */
.mimic-tile.mimic-spotlight {
  animation: mimicSpotlight 0.6s ease-in-out infinite alternate !important;
  z-index: 5;
  box-shadow: 0 0 18px 6px rgba(251, 191, 36, 0.7);
}

@keyframes mimicSpotlight {
  0% {
    transform: scale(1);
    box-shadow: 0 0 12px 4px rgba(251, 191, 36, 0.5);
  }
  100% {
    transform: scale(1.15);
    box-shadow: 0 0 24px 8px rgba(251, 191, 36, 0.9);
  }
}

/* ë³´ë“œ ì•„ë˜ ì¸ë¼ì¸ íŠœí† ë¦¬ì–¼ ì¹´ë“œ */
.mimic-board-tutorial {
  background: linear-gradient(135deg, rgba(30,30,50,0.95) 0%, rgba(50,40,20,0.95) 100%);
  border: 2px solid var(--gold);
  border-radius: 14px;
  padding: 16px 14px;
  text-align: center;
  max-width: 360px;
  margin: 0 auto;
  box-shadow: 0 0 30px rgba(251, 191, 36, 0.25), inset 0 1px 0 rgba(251, 191, 36, 0.15);
}

.mimic-board-icon {
  font-size: var(--icon-xl);
  margin-bottom: 8px;
  filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.6));
}

.mimic-board-title {
  font-size: var(--label-lg);
  font-weight: 800;
  color: var(--gold);
  margin-bottom: 6px;
}

.mimic-board-desc {
  font-size: var(--label-md);
  color: var(--text-secondary);
  line-height: 1.5;
  margin-bottom: 12px;
}

/* ìš”ì • ë§í’ì„  í–‰ */
.mimic-board-fairy-row {
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: center;
  margin-bottom: 12px;
}

.mimic-board-bubble {
  background: rgba(155, 138, 255, 0.15);
  border: 1px solid rgba(155, 138, 255, 0.35);
  border-radius: 12px;
  padding: 8px 12px;
  font-size: var(--label-sm);
  color: var(--text-primary);
  text-align: left;
  line-height: 1.5;
  position: relative;
  max-width: 240px;
}

.mimic-board-bubble::before {
  content: '';
  position: absolute;
  left: -6px;
  top: 50%;
  transform: translateY(-50%);
  border: 6px solid transparent;
  border-right-color: rgba(155, 138, 255, 0.35);
}

/* ë³´ìƒ ì¹© */
.mimic-board-rewards {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.mimic-reward-chip {
  font-size: var(--label-md);
  padding: 6px 12px;
  background: rgba(251, 191, 36, 0.1);
  border: 1px solid rgba(251, 191, 36, 0.35);
  border-radius: 20px;
  color: var(--gold);
  font-weight: 600;
}

/* í˜ì´ì§€ ì¸ë””ì¼€ì´í„° ì  */
.mimic-board-dots {
  display: flex;
  gap: 6px;
  justify-content: center;
  margin-top: 10px;
}

.mimic-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  transition: all 0.3s;
}

.mimic-dot.active {
  background: var(--gold);
  box-shadow: 0 0 6px rgba(251, 191, 36, 0.6);
  transform: scale(1.3);
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* ì „íˆ¬ ë¯¸ë¯¹ ì•Œë¦¼ */
.mimic-combat-alert {
  position: fixed;
  top: 60px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--bg-card);
  border: 2px solid var(--gold);
  border-radius: 12px;
  padding: 10px 16px;
  z-index: 2500;
  box-shadow: 0 0 24px rgba(251, 191, 36, 0.4);
  animation: slideDown 0.4s ease-out;
}

@keyframes slideDown {
  from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

.mimic-combat-alert.alert-fadeout {
  animation: slideUp 0.5s ease-in forwards;
}

@keyframes slideUp {
  from { transform: translateX(-50%) translateY(0); opacity: 1; }
  to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
}

/* ====================================================
   ì„¸ê³„ì˜ ì–´ë¨¸ë‹ˆ ë„ìš°ë¯¸ ë°”
   ==================================================== */

.helper-bar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(34,139,34,0.12);
  border-radius: 6px;
  margin: 0 4px 2px;
  overflow: hidden;
  white-space: nowrap;
}

.helper-emoji {
  font-size: 12px;
  flex-shrink: 0;
}

.helper-msg {
  flex: 1;
  font-size: 10px;
  color: #a7f3d0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  opacity: 0.85;
}

.helper-dismiss-btn {
  font-size: 9px;
  padding: 1px 5px;
  border-radius: 4px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  color: #aaa;
  cursor: pointer;
  flex-shrink: 0;
  white-space: nowrap;
}

.helper-dismiss-btn:hover {
  background: rgba(255,255,255,0.2);
  color: #fff;
}

@keyframes helperFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

/* ====================================================
   ìŠ¤í…Œì´ì§€1 í†µí•© ë ˆì´ì•„ì›ƒ (ìº”ë””â†’ì£¼ì‚¬ìœ„â†’ë§ˆë¸”)
   ==================================================== */

#stage1-integrated {
  text-align: center;
  width: 100%;
  padding-top: 28px; /* ê³ ì • HUD ì•„ë˜ë¡œ ë°€ê¸° */
}

/* í˜ì´ì¦ˆ í‘œì‹œ ë°” â€” ì–‡ì€ í•œ ì¤„ */
.s1-phase-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 1px 6px;
  margin: 0 auto;
  font-size: 11px;
  color: var(--text-secondary, #8e92b8);
  opacity: 0.8;
}

/* ìº”ë”” ì˜ì—­ */
.s1-candy-area {
  width: 100%;
}

/* ìƒíƒœ ë°” */
.s1-status-bar {
  font-size: var(--label-md);
  color: var(--text-secondary, #aaa);
  padding: 4px 12px;
  text-align: center;
  border-top: 1px solid rgba(100, 110, 130, 0.15);
  margin-top: 4px;
}


/* ìƒì  ì•„ì´í…œ ë²„íŠ¼ */
.shop-item-btn {
  background: rgba(155, 138, 255, 0.1);
  border: 1px solid rgba(155, 138, 255, 0.3);
  color: var(--text-primary, #eee);
  transition: all 0.2s;
}

.shop-item-btn:hover:not(:disabled) {
  background: rgba(155, 138, 255, 0.2);
  border-color: rgba(155, 138, 255, 0.5);
}

.shop-item-btn:disabled {
  cursor: default;
}

/* ====================================================
   ì»´íŒ©íŠ¸ ëª¨ë“œ (í†µí•© ìŠ¤í…Œì´ì§€1: í° íƒ€ì¼, í•˜ë‹¨ ì¶•ì†Œ)
   ==================================================== */

.candy-compact {
  padding: 0 2px;
}

/* í° ìº”ë”” ì…€ (52px) */
.candy-cell-lg {
  font-size: clamp(22px, 6.5vw, 30px);
  border-radius: 8px;
}

.candy-cell-lg.special-tile {
  font-size: clamp(20px, 6vw, 28px);
}

/* ì»´íŒ©íŠ¸ info ë°” (1ì¤„) */
.candy-compact-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 2px 8px;
  font-size: clamp(10px, 3vw, 13px);
  color: var(--text-secondary, #aab);
  flex-wrap: nowrap;
  white-space: nowrap;
}

.cci-goal {
  font-weight: 700;
  color: var(--text-primary, #eee);
}

.cci-moves {
  color: var(--gold, #fbbf24);
  font-weight: 600;
}

.cci-frag {
  color: #a29bfe;
}

.cci-rage {
  font-weight: 600;
}

/* ì»´íŒ©íŠ¸ í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
.compact-progress {
  height: 4px !important;
  max-width: 90%;
  border-radius: 2px;
}

/* â”€â”€ í•˜ë‹¨ ì¥ë¹„/íŒŒí‹°/ìˆ˜ì§‘ íŒ¨ë„ â”€â”€ */
.bottom-panel {
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow: hidden;
  padding: 4px 2px 2px;
  background: rgba(10, 10, 30, 0.6);
  border-top: 1px solid var(--border-subtle, rgba(255,255,255,0.08));
  border-radius: 0 0 8px 8px;
}

.bp-section {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0 2px;
}

.bp-label {
  font-size: 9px;
  color: var(--text-secondary, #8e92b8);
  writing-mode: vertical-rl;
  text-orientation: upright;
  letter-spacing: -2px;
  line-height: 1;
  min-width: auto;
  width: 12px;
  text-align: center;
  flex-shrink: 0;
}

.bp-row {
  display: flex;
  align-items: center;
  gap: 1px;
  flex: 1;
  justify-content: center;
}

.bp-slot {
  width: clamp(22px, 6.5vw, 32px);
  height: clamp(22px, 6.5vw, 32px);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-size: var(--icon-md);
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: rgba(255,255,255,0.25);
}

.bp-slot.slot-filled {
  border-color: rgba(251, 191, 36, 0.4);
  background: rgba(251, 191, 36, 0.08);
  color: #fff;
}

.bp-slot.slot-pet {
  border-color: rgba(134, 239, 172, 0.4);
}
.bp-slot.slot-pet.slot-filled {
  background: rgba(134, 239, 172, 0.08);
}

.bp-divider {
  width: 1px;
  height: 20px;
  background: rgba(255,255,255,0.1);
  margin: 0 2px;
}

/* â”€â”€ ì¸ë²¤í† ë¦¬ í–‰ â”€â”€ */
.bp-inv-row {
  gap: 2px;
  flex-wrap: nowrap;
}

.bp-inv-slot {
  width: var(--slot-size, 28px);
  height: var(--slot-size, 28px);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
  font-size: var(--icon-sm, 14px);
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.02);
  color: rgba(255,255,255,0.2);
  position: relative;
  flex-shrink: 0;
}

.bp-inv-slot.slot-filled {
  border-color: rgba(192,132,252,0.4);
  background: rgba(192,132,252,0.08);
  color: #fff;
}

.bp-inv-count {
  position: absolute;
  bottom: -1px;
  right: 0;
  font-size: 8px;
  font-weight: 700;
  color: #fbbf24;
  text-shadow: 0 0 3px rgba(0,0,0,0.8);
  line-height: 1;
}

.bp-inv-summary {
  font-size: var(--label-xs, 10px);
  color: var(--text-secondary, #8e92b8);
  white-space: nowrap;
  margin-left: 4px;
  flex-shrink: 0;
}

.bp-inv-frag {
  letter-spacing: 1px;
  color: #c084fc;
}

/* ì¸ë²¤í† ë¦¬ ë°˜ì§ì„ (ì•„ì´í…œ ë„ì°©) */
.bp-inventory-section {
  transition: background 0.3s ease;
}

.bp-inv-flash {
  background: rgba(192,132,252,0.2) !important;
}

@keyframes invPulse {
  0%, 100% { box-shadow: none; }
  50% { box-shadow: 0 0 8px rgba(192,132,252,0.6); }
}

.bp-inv-slot.slot-filled {
  animation: invPulse 2s ease-in-out infinite;
}

/* ê¸°ì¡´ ë¯¸ë‹ˆë°” (í´ë°±ìš© ìœ ì§€) */
.candy-mini-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 2px 8px;
  font-size: clamp(11px, 3.2vw, 15px);
  color: var(--text-secondary, #aab);
}

.cmb-heroes { letter-spacing: 2px; }
.cmb-pet { opacity: 0.8; }
.cmb-sets { color: var(--gold, #fbbf24); font-weight: 600; }

/* ====================================================
   ë³´ë„ˆìŠ¤ íƒ€ì¼ ìë™í­íŒŒ ì—°ì¶œ ì‹œìŠ¤í…œ
   ==================================================== */

/* ë‚™í•˜ ì¤‘ íŠ¹ìˆ˜ íƒ€ì¼ */
.bonus-tile-falling {
  position: fixed;
  z-index: 2100;
  pointer-events: none;
  font-size: clamp(20px, 6vw, 28px);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  filter: drop-shadow(0 0 12px var(--glow-color, rgba(251,191,36,0.8)));
  animation: bonusTileSpawn 0.2s ease-out forwards;
}

/* ìƒì„± ì‹œ ì¶œí˜„ */
@keyframes bonusTileSpawn {
  0% { transform: scale(0) rotate(-20deg); opacity: 0; }
  60% { transform: scale(1.3) rotate(5deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

/* ì°©ì§€ ì„íŒ©íŠ¸ */
@keyframes bonusTileImpact {
  0% { transform: scale(1); }
  20% { transform: scale(1.6); filter: brightness(2); }
  50% { transform: scale(0.8); }
  100% { transform: scale(0); opacity: 0; }
}

/* ì°©ì§€ ì¶©ê²©íŒŒ ë§ */
.bonus-impact-ring {
  position: fixed;
  z-index: 2050;
  pointer-events: none;
  width: 0;
  height: 0;
  border-radius: 50%;
  border: 3px solid var(--ring-color, rgba(251,191,36,0.8));
  transform: translate(-50%, -50%);
  animation: bonusRingExpand 0.5s ease-out forwards;
}

@keyframes bonusRingExpand {
  0% { width: 0; height: 0; opacity: 1; border-width: 3px; }
  100% { width: 120px; height: 120px; opacity: 0; border-width: 1px; }
}

/* ì°©ì§€ íŒŒí¸ íŒŒí‹°í´ */
.bonus-impact-fragment {
  position: fixed;
  z-index: 2150;
  pointer-events: none;
  font-size: var(--label-lg);
  transform: translate(-50%, -50%);
  animation: bonusFragBurst 0.6s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes bonusFragBurst {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
  30% { transform: translate(calc(-50% + var(--tx) * 0.4), calc(-50% + var(--ty) * 0.4)) scale(1.2); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.3); opacity: 0; }
}

/* ====================================================
   ğŸ† ì½¤ë³´ ì´í™íŠ¸ ì‹œìŠ¤í…œ
   ì½¤ë³´ê°€ ìŒ“ì¼ìˆ˜ë¡ í™”ë ¤í•œ ì‹œê° íš¨ê³¼
   ==================================================== */

/* ì½¤ë³´ íŒŒí‹°í´ (ë°©ì‚¬í˜• í­ë°œ) */
.combo-particle {
  position: fixed;
  z-index: 2500;
  pointer-events: none;
  transform: translate(-50%, -50%) scale(0);
  animation: comboParticleBurst 0.5s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes comboParticleBurst {
  0% { transform: translate(-50%, -50%) scale(0.3); opacity: 1; }
  30% { transform: translate(calc(-50% + var(--tx) * 0.3), calc(-50% + var(--ty) * 0.3)) scale(1.3); opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0); opacity: 0; }
}

/* ì½¤ë³´ ìˆ«ì (ì¤‘ì•™ì—ì„œ í™•ëŒ€+ìƒìŠ¹) */
.combo-number {
  position: fixed;
  z-index: 2600;
  pointer-events: none;
  font-weight: 900;
  font-family: 'Noto Sans KR', sans-serif;
  transform: translate(-50%, -50%) scale(0);
  animation: comboNumberPop 0.8s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes comboNumberPop {
  0% { transform: translate(-50%, -50%) scale(0) rotate(-5deg); opacity: 0; }
  15% { transform: translate(-50%, -50%) scale(1.4) rotate(3deg); opacity: 1; }
  40% { transform: translate(-50%, calc(-50% - 15px)) scale(1.1) rotate(0deg); opacity: 1; }
  100% { transform: translate(-50%, calc(-50% - 40px)) scale(0.7); opacity: 0; }
}

/* ì½¤ë³´ í™”ë©´ í”Œë˜ì‹œ */
.combo-flash {
  position: fixed;
  inset: 0;
  z-index: 2400;
  pointer-events: none;
  animation: comboFlash 0.4s ease-out forwards;
}

@keyframes comboFlash {
  0% { opacity: 0; }
  20% { opacity: 1; }
  100% { opacity: 0; }
}

/* ë³´ë“œ í”ë“¤ë¦¼ (ì½¤ë³´ìš©) */
@keyframes comboShake {
  0%, 100% { transform: translate(0, 0); }
  20% { transform: translate(calc(var(--shake-px) * -1), calc(var(--shake-px) * 0.5)); }
  40% { transform: translate(var(--shake-px), calc(var(--shake-px) * -0.5)); }
  60% { transform: translate(calc(var(--shake-px) * -0.5), var(--shake-px)); }
  80% { transform: translate(calc(var(--shake-px) * 0.5), calc(var(--shake-px) * -1)); }
}
