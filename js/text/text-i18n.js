// ============================================================
// ðŸŒ ëª½ê¸€ë²¨ ì›¹ì—”ì§„ - ë‹¤êµ­ì–´ ë²ˆì—­ ì‹œìŠ¤í…œ (3/3)
// ============================================================
// ê²Œìž„ ë‚´ ëª¨ë“  í…ìŠ¤íŠ¸ë¥¼ ë‹¤êµ­ì–´ë¡œ ê´€ë¦¬
// ì–¸ì–´ ì „í™˜ + ë³µìˆ˜í˜• + í¬ë§·íŒ… + ë™ì  í…ìŠ¤íŠ¸
//
// Claude Code: js/text/text-i18n.js ì— ë„£ìœ¼ì„¸ìš”
// ============================================================

const TextI18n = {

  _currentLang: 'ko',
  _fallbackLang: 'en',
  _dictionaries: {},
  _observers: [],

  // ========== ê²Œìž„ ë²ˆì—­ ì‚¬ì „ ==========
  TRANSLATIONS: {

    // ===== ì‹œìŠ¤í…œ/ê³µí†µ =====
    'game.title': {
      ko: 'ëª½ê¸€ë²¨ ì´ì•¼ê¸°',
      en: 'Tale of Monglebel',
      ja: 'ãƒ¢ãƒ³ã‚°ãƒ«ãƒ™ãƒ«ç‰©èªž',
      zh: 'æ¢¦å¹»é“ƒé“›çš„æ•…äº‹',
      'zh-TW': 'å¤¢å¹»éˆ´éºçš„æ•…äº‹',
      th: 'à¸™à¸´à¸—à¸²à¸™à¸¡à¸‡à¹€à¸à¸´à¸¥à¹€à¸šà¸¥',
      ar: 'Ø­ÙƒØ§ÙŠØ© Ù…ÙˆÙ†ØºÙ„Ø¨Ù„',
      hi: 'à¤®à¥‹à¤‚à¤—à¤²à¤¬à¥‡à¤² à¤•à¥€ à¤•à¤¹à¤¾à¤¨à¥€'
    },
    'game.subtitle': {
      ko: 'ë‹¬ì½¤í•œ ëª¨í—˜ì˜ ì‹œìž‘',
      en: 'A Sweet Adventure Begins',
      ja: 'ç”˜ã„å†’é™ºã®å§‹ã¾ã‚Š',
      zh: 'ç”œèœœå†’é™©çš„å¼€å§‹',
      th: 'à¸à¸²à¸£à¸œà¸ˆà¸à¸ à¸±à¸¢à¸­à¸±à¸™à¹à¸ªà¸™à¸«à¸§à¸²à¸™',
      ar: 'Ø¨Ø¯Ø§ÙŠØ© Ù…ØºØ§Ù…Ø±Ø© Ø­Ù„ÙˆØ©',
      hi: 'à¤à¤• à¤®à¥€à¤ à¥€ à¤¸à¤¾à¤¹à¤¸à¤¿à¤• à¤¶à¥à¤°à¥à¤†à¤¤'
    },
    'game.loading': {
      ko: 'ë¡œë”© ì¤‘...',
      en: 'Loading...',
      ja: 'èª­ã¿è¾¼ã¿ä¸­...',
      zh: 'åŠ è½½ä¸­...',
      th: 'à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...',
      ar: '...Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„',
      hi: 'à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...'
    },

    // ===== ë©”ë‰´ =====
    'menu.start': {
      ko: 'ê²Œìž„ ì‹œìž‘', en: 'Start Game', ja: 'ã‚²ãƒ¼ãƒ é–‹å§‹',
      zh: 'å¼€å§‹æ¸¸æˆ', th: 'à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡', ar: 'Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©', hi: 'à¤–à¥‡à¤² à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚'
    },
    'menu.continue': {
      ko: 'ì´ì–´í•˜ê¸°', en: 'Continue', ja: 'ç¶šãã‹ã‚‰',
      zh: 'ç»§ç»­', th: 'à¹€à¸¥à¹ˆà¸™à¸•à¹ˆà¸­', ar: 'Ø§Ø³ØªÙ…Ø±Ø§Ø±', hi: 'à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚'
    },
    'menu.settings': {
      ko: 'ì„¤ì •', en: 'Settings', ja: 'è¨­å®š',
      zh: 'è®¾ç½®', th: 'à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²', ar: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', hi: 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸'
    },
    'menu.sound': {
      ko: 'ì‚¬ìš´ë“œ', en: 'Sound', ja: 'ã‚µã‚¦ãƒ³ãƒ‰',
      zh: 'å£°éŸ³', th: 'à¹€à¸ªà¸µà¸¢à¸‡', ar: 'Ø§Ù„ØµÙˆØª', hi: 'à¤§à¥à¤µà¤¨à¤¿'
    },
    'menu.language': {
      ko: 'ì–¸ì–´', en: 'Language', ja: 'è¨€èªž',
      zh: 'è¯­è¨€', th: 'à¸ à¸²à¸©à¸²', ar: 'Ø§Ù„Ù„ØºØ©', hi: 'à¤­à¤¾à¤·à¤¾'
    },
    'menu.credits': {
      ko: 'í¬ë ˆë”§', en: 'Credits', ja: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ',
      zh: 'åˆ¶ä½œäººå‘˜', th: 'à¹€à¸„à¸£à¸”à¸´à¸•', ar: 'Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª', hi: 'à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ'
    },
    'menu.quit': {
      ko: 'ì¢…ë£Œ', en: 'Quit', ja: 'çµ‚äº†',
      zh: 'é€€å‡º', th: 'à¸­à¸­à¸', ar: 'Ø®Ø±ÙˆØ¬', hi: 'à¤¬à¤¾à¤¹à¤° à¤¨à¤¿à¤•à¤²à¥‡à¤‚'
    },

    // ===== ì „íˆ¬ =====
    'battle.start': {
      ko: 'ì „íˆ¬ ì‹œìž‘!', en: 'Battle Start!', ja: 'ãƒãƒˆãƒ«é–‹å§‹ï¼',
      zh: 'æˆ˜æ–—å¼€å§‹ï¼', th: 'à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹ˆà¸­à¸ªà¸¹à¹‰!', ar: '!Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø±ÙƒØ©', hi: 'à¤²à¤¡à¤¼à¤¾à¤ˆ à¤¶à¥à¤°à¥‚!'
    },
    'battle.victory': {
      ko: 'ìŠ¹ë¦¬!', en: 'Victory!', ja: 'å‹åˆ©ï¼',
      zh: 'èƒœåˆ©ï¼', th: 'à¸Šà¸±à¸¢à¸Šà¸™à¸°!', ar: '!Ø§Ù„Ù†ØµØ±', hi: 'à¤œà¥€à¤¤!'
    },
    'battle.defeat': {
      ko: 'íŒ¨ë°°...', en: 'Defeat...', ja: 'æ•—åŒ—...',
      zh: 'å¤±è´¥...', th: 'à¸žà¹ˆà¸²à¸¢à¹à¸žà¹‰...', ar: '...Ù‡Ø²ÙŠÙ…Ø©', hi: 'à¤¹à¤¾à¤°...'
    },
    'battle.attack': {
      ko: 'ê³µê²©!', en: 'Attack!', ja: 'æ”»æ’ƒï¼',
      zh: 'æ”»å‡»ï¼', th: 'à¹‚à¸ˆà¸¡à¸•à¸µ!', ar: '!Ù‡Ø¬ÙˆÙ…', hi: 'à¤¹à¤®à¤²à¤¾!'
    },
    'battle.defend': {
      ko: 'ë°©ì–´!', en: 'Defend!', ja: 'é˜²å¾¡ï¼',
      zh: 'é˜²å¾¡ï¼', th: 'à¸›à¹‰à¸­à¸‡à¸à¸±à¸™!', ar: '!Ø¯ÙØ§Ø¹', hi: 'à¤°à¤•à¥à¤·à¤¾!'
    },
    'battle.skill': {
      ko: 'ìŠ¤í‚¬!', en: 'Skill!', ja: 'ã‚¹ã‚­ãƒ«ï¼',
      zh: 'æŠ€èƒ½ï¼', th: 'à¸—à¸±à¸à¸©à¸°!', ar: '!Ù…Ù‡Ø§Ø±Ø©', hi: 'à¤•à¥Œà¤¶à¤²!'
    },
    'battle.critical': {
      ko: 'í¬ë¦¬í‹°ì»¬!', en: 'CRITICAL!', ja: 'ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼',
      zh: 'æš´å‡»ï¼', th: 'à¸„à¸£à¸´à¸•à¸´à¸„à¸­à¸¥!', ar: '!Ø¶Ø±Ø¨Ø© Ø­Ø±Ø¬Ø©', hi: 'à¤•à¥à¤°à¤¿à¤Ÿà¤¿à¤•à¤²!'
    },
    'battle.miss': {
      ko: 'ë¹—ë‚˜ê°!', en: 'MISS!', ja: 'ãƒŸã‚¹ï¼',
      zh: 'æœªå‘½ä¸­ï¼', th: 'à¸žà¸¥à¸²à¸”!', ar: '!Ø®Ø·Ø£', hi: 'à¤šà¥‚à¤•!'
    },
    'battle.combo': {
      ko: '{n}ì½¤ë³´!', en: '{n}x COMBO!', ja: '{n}ã‚³ãƒ³ãƒœï¼',
      zh: '{n}è¿žå‡»ï¼', th: '{n} à¸„à¸­à¸¡à¹‚à¸š!', ar: '!{n} ÙƒÙˆÙ…Ø¨Ùˆ', hi: '{n} à¤•à¥‰à¤®à¥à¤¬à¥‹!'
    },

    // ===== ìºë¦­í„° =====
    'class.warrior':   { ko: 'ì „ì‚¬', en: 'Warrior', ja: 'æˆ¦å£«', zh: 'æˆ˜å£«', th: 'à¸™à¸±à¸à¸£à¸š', ar: 'Ù…Ø­Ø§Ø±Ø¨', hi: 'à¤¯à¥‹à¤¦à¥à¤§à¤¾' },
    'class.mage':      { ko: 'ë§ˆë²•ì‚¬', en: 'Mage', ja: 'é­”æ³•ä½¿ã„', zh: 'æ³•å¸ˆ', th: 'à¸ˆà¸­à¸¡à¹€à¸§à¸—', ar: 'Ø³Ø§Ø­Ø±', hi: 'à¤œà¤¾à¤¦à¥‚à¤—à¤°' },
    'class.archer':    { ko: 'ê¶ìˆ˜', en: 'Archer', ja: 'å¼“ä½¿ã„', zh: 'å¼“ç®­æ‰‹', th: 'à¸™à¸±à¸à¸˜à¸™à¸¹', ar: 'Ø±Ø§Ù…ÙŠ', hi: 'à¤¤à¥€à¤°à¤‚à¤¦à¤¾à¤œ' },
    'class.knight':    { ko: 'ê¸°ì‚¬', en: 'Knight', ja: 'é¨Žå£«', zh: 'éª‘å£«', th: 'à¸­à¸±à¸¨à¸§à¸´à¸™', ar: 'ÙØ§Ø±Ø³', hi: 'à¤¶à¥‚à¤°à¤µà¥€à¤°' },
    'class.cleric':    { ko: 'ì„±ì§ìž', en: 'Cleric', ja: 'è–è·è€…', zh: 'ç‰§å¸ˆ', th: 'à¸™à¸±à¸à¸šà¸§à¸Š', ar: 'ÙƒØ§Ù‡Ù†', hi: 'à¤ªà¥à¤œà¤¾à¤°à¥€' },
    'class.rogue':     { ko: 'ë„ì ', en: 'Rogue', ja: 'ç›—è³Š', zh: 'ç›—è´¼', th: 'à¹‚à¸ˆà¸£', ar: 'Ù„Øµ', hi: 'à¤šà¥‹à¤°' },
    'class.summoner':  { ko: 'ì†Œí™˜ì‚¬', en: 'Summoner', ja: 'å¬å–šå£«', zh: 'å¬å”¤å¸ˆ', th: 'à¸œà¸¹à¹‰à¹€à¸£à¸µà¸¢à¸', ar: 'Ù…Ø³ØªØ¯Ø¹ÙŠ', hi: 'à¤¸à¤®à¤¨à¤•à¤°à¥à¤¤à¤¾' },
    'class.alchemist': { ko: 'ì—°ê¸ˆìˆ ì‚¬', en: 'Alchemist', ja: 'éŒ¬é‡‘è¡“å¸«', zh: 'ç‚¼é‡‘æœ¯å£«', th: 'à¸™à¸±à¸à¹€à¸¥à¹ˆà¸™à¹à¸£à¹ˆ', ar: 'Ø®ÙŠÙ…ÙŠØ§Ø¦ÙŠ', hi: 'à¤•à¥€à¤®à¤¿à¤¯à¤¾à¤—à¤°' },

    // ===== ì›ì†Œ =====
    'element.fire':    { ko: 'ë¶ˆ', en: 'Fire', ja: 'ç«', zh: 'ç«', th: 'à¹„à¸Ÿ', ar: 'Ù†Ø§Ø±', hi: 'à¤…à¤—à¥à¤¨à¤¿' },
    'element.water':   { ko: 'ë¬¼', en: 'Water', ja: 'æ°´', zh: 'æ°´', th: 'à¸™à¹‰à¸³', ar: 'Ù…Ø§Ø¡', hi: 'à¤œà¤²' },
    'element.grass':   { ko: 'í’€', en: 'Grass', ja: 'è‰', zh: 'è‰', th: 'à¸«à¸à¹‰à¸²', ar: 'Ø¹Ø´Ø¨', hi: 'à¤˜à¤¾à¤¸' },
    'element.thunder': { ko: 'ë²ˆê°œ', en: 'Thunder', ja: 'é›·', zh: 'é›·', th: 'à¸ªà¸²à¸¢à¸Ÿà¹‰à¸²', ar: 'Ø±Ø¹Ø¯', hi: 'à¤¬à¤¿à¤œà¤²à¥€' },
    'element.ice':     { ko: 'ì–¼ìŒ', en: 'Ice', ja: 'æ°·', zh: 'å†°', th: 'à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡', ar: 'Ø¬Ù„ÙŠØ¯', hi: 'à¤¬à¤°à¥à¤«' },
    'element.earth':   { ko: 'ë•…', en: 'Earth', ja: 'åœŸ', zh: 'åœŸ', th: 'à¸”à¸´à¸™', ar: 'Ø£Ø±Ø¶', hi: 'à¤ªà¥ƒà¤¥à¥à¤µà¥€' },
    'element.light':   { ko: 'ë¹›', en: 'Light', ja: 'å…‰', zh: 'å…‰', th: 'à¹à¸ªà¸‡', ar: 'Ù†ÙˆØ±', hi: 'à¤ªà¥à¤°à¤•à¤¾à¤¶' },
    'element.dark':    { ko: 'ì–´ë‘ ', en: 'Dark', ja: 'é—‡', zh: 'æš—', th: 'à¸¡à¸·à¸”', ar: 'Ø¸Ù„Ø§Ù…', hi: 'à¤…à¤‚à¤§à¤•à¤¾à¤°' },

    // ===== ë“±ê¸‰ =====
    'rarity.common':    { ko: 'ì¼ë°˜', en: 'Common', ja: 'ã‚³ãƒ¢ãƒ³', zh: 'æ™®é€š', th: 'à¸˜à¸£à¸£à¸¡à¸”à¸²', ar: 'Ø¹Ø§Ø¯ÙŠ', hi: 'à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯' },
    'rarity.uncommon':  { ko: 'ê³ ê¸‰', en: 'Uncommon', ja: 'ã‚¢ãƒ³ã‚³ãƒ¢ãƒ³', zh: 'ä¼˜ç§€', th: 'à¹„à¸¡à¹ˆà¸˜à¸£à¸£à¸¡à¸”à¸²', ar: 'ØºÙŠØ± Ø¹Ø§Ø¯ÙŠ', hi: 'à¤…à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯' },
    'rarity.rare':      { ko: 'í¬ê·€', en: 'Rare', ja: 'ãƒ¬ã‚¢', zh: 'ç¨€æœ‰', th: 'à¸«à¸²à¸¢à¸²à¸', ar: 'Ù†Ø§Ø¯Ø±', hi: 'à¤¦à¥à¤°à¥à¤²à¤­' },
    'rarity.epic':      { ko: 'ì˜ì›…', en: 'Epic', ja: 'ã‚¨ãƒ”ãƒƒã‚¯', zh: 'å²è¯—', th: 'à¸¡à¸«à¸²à¸à¸²à¸žà¸¢à¹Œ', ar: 'Ù…Ù„Ø­Ù…ÙŠ', hi: 'à¤®à¤¹à¤¾à¤•à¤¾à¤µà¥à¤¯' },
    'rarity.legendary': { ko: 'ì „ì„¤', en: 'Legendary', ja: 'ãƒ¬ã‚¸ã‚§ãƒ³ãƒ€ãƒªãƒ¼', zh: 'ä¼ è¯´', th: 'à¸•à¸³à¸™à¸²à¸™', ar: 'Ø£Ø³Ø·ÙˆØ±ÙŠ', hi: 'à¤ªà¥Œà¤°à¤¾à¤£à¤¿à¤•' },
    'rarity.mythic':    { ko: 'ì‹ í™”', en: 'Mythic', ja: 'ãƒŸã‚·ãƒƒã‚¯', zh: 'ç¥žè¯', th: 'à¸•à¸³à¸™à¸²à¸™à¹€à¸—à¸ž', ar: 'Ø®Ø±Ø§ÙÙŠ', hi: 'à¤ªà¥Œà¤°à¤¾à¤£à¤¿à¤•' },

    // ===== ìŠ¤íƒ¯ =====
    'stat.hp':    { ko: 'ì²´ë ¥', en: 'HP', ja: 'HP', zh: 'ç”Ÿå‘½', th: 'à¸žà¸¥à¸±à¸‡à¸Šà¸µà¸§à¸´à¸•', ar: 'ØµØ­Ø©', hi: 'à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯' },
    'stat.mp':    { ko: 'ë§ˆë‚˜', en: 'MP', ja: 'MP', zh: 'é­”åŠ›', th: 'à¸¡à¸²à¸™à¸²', ar: 'Ù…Ø§Ù†Ø§', hi: 'à¤®à¤¾à¤¨à¤¾' },
    'stat.atk':   { ko: 'ê³µê²©ë ¥', en: 'ATK', ja: 'æ”»æ’ƒ', zh: 'æ”»å‡»', th: 'à¸žà¸¥à¸±à¸‡à¹‚à¸ˆà¸¡à¸•à¸µ', ar: 'Ù‡Ø¬ÙˆÙ…', hi: 'à¤¹à¤®à¤²à¤¾' },
    'stat.def':   { ko: 'ë°©ì–´ë ¥', en: 'DEF', ja: 'é˜²å¾¡', zh: 'é˜²å¾¡', th: 'à¸žà¸¥à¸±à¸‡à¸›à¹‰à¸­à¸‡à¸à¸±à¸™', ar: 'Ø¯ÙØ§Ø¹', hi: 'à¤°à¤•à¥à¤·à¤¾' },
    'stat.spd':   { ko: 'ì†ë„', en: 'SPD', ja: 'é€Ÿåº¦', zh: 'é€Ÿåº¦', th: 'à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§', ar: 'Ø³Ø±Ø¹Ø©', hi: 'à¤—à¤¤à¤¿' },
    'stat.luk':   { ko: 'í–‰ìš´', en: 'LUK', ja: 'é‹', zh: 'å¹¸è¿', th: 'à¹‚à¸Šà¸„', ar: 'Ø­Ø¸', hi: 'à¤­à¤¾à¤—à¥à¤¯' },
    'stat.exp':   { ko: 'ê²½í—˜ì¹˜', en: 'EXP', ja: 'çµŒé¨“å€¤', zh: 'ç»éªŒ', th: 'à¸„à¹ˆà¸²à¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œ', ar: 'Ø®Ø¨Ø±Ø©', hi: 'à¤…à¤¨à¥à¤­à¤µ' },
    'stat.level': { ko: 'ë ˆë²¨', en: 'Level', ja: 'ãƒ¬ãƒ™ãƒ«', zh: 'ç­‰çº§', th: 'à¹€à¸¥à¹€à¸§à¸¥', ar: 'Ù…Ø³ØªÙˆÙ‰', hi: 'à¤¸à¥à¤¤à¤°' },
    'stat.gold':  { ko: 'ê³¨ë“œ', en: 'Gold', ja: 'ã‚´ãƒ¼ãƒ«ãƒ‰', zh: 'é‡‘å¸', th: 'à¸—à¸­à¸‡', ar: 'Ø°Ù‡Ø¨', hi: 'à¤¸à¥‹à¤¨à¤¾' },

    // ===== UI =====
    'ui.ok':     { ko: 'í™•ì¸', en: 'OK', ja: 'OK', zh: 'ç¡®è®¤', th: 'à¸•à¸à¸¥à¸‡', ar: 'Ù…ÙˆØ§ÙÙ‚', hi: 'à¤ à¥€à¤• à¤¹à¥ˆ' },
    'ui.cancel': { ko: 'ì·¨ì†Œ', en: 'Cancel', ja: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', zh: 'å–æ¶ˆ', th: 'à¸¢à¸à¹€à¸¥à¸´à¸', ar: 'Ø¥Ù„ØºØ§Ø¡', hi: 'à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚' },
    'ui.yes':    { ko: 'ì˜ˆ', en: 'Yes', ja: 'ã¯ã„', zh: 'æ˜¯', th: 'à¹ƒà¸Šà¹ˆ', ar: 'Ù†Ø¹Ù…', hi: 'à¤¹à¤¾à¤' },
    'ui.no':     { ko: 'ì•„ë‹ˆì˜¤', en: 'No', ja: 'ã„ã„ãˆ', zh: 'å¦', th: 'à¹„à¸¡à¹ˆ', ar: 'Ù„Ø§', hi: 'à¤¨à¤¹à¥€à¤‚' },
    'ui.back':   { ko: 'ë’¤ë¡œ', en: 'Back', ja: 'æˆ»ã‚‹', zh: 'è¿”å›ž', th: 'à¸à¸¥à¸±à¸š', ar: 'Ø±Ø¬ÙˆØ¹', hi: 'à¤µà¤¾à¤ªà¤¸' },
    'ui.next':   { ko: 'ë‹¤ìŒ', en: 'Next', ja: 'æ¬¡ã¸', zh: 'ä¸‹ä¸€æ­¥', th: 'à¸–à¸±à¸”à¹„à¸›', ar: 'Ø§Ù„ØªØ§Ù„ÙŠ', hi: 'à¤…à¤—à¤²à¤¾' },
    'ui.close':  { ko: 'ë‹«ê¸°', en: 'Close', ja: 'é–‰ã˜ã‚‹', zh: 'å…³é—­', th: 'à¸›à¸´à¸”', ar: 'Ø¥ØºÙ„Ø§Ù‚', hi: 'à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚' },

    // ===== ì£¼ì‚¬ìœ„ =====
    'dice.roll':   { ko: 'ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°!', en: 'Roll Dice!', ja: 'ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹ï¼', zh: 'æŽ·éª°å­ï¼', th: 'à¸—à¸­à¸¢à¸¥à¸¹à¸à¹€à¸•à¹‹à¸²!', ar: '!Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯', hi: 'à¤ªà¤¾à¤¸à¤¾ à¤«à¥‡à¤‚à¤•à¥‡à¤‚!' },
    'dice.double': { ko: 'ë”ë¸”!', en: 'Double!', ja: 'ãƒ€ãƒ–ãƒ«ï¼', zh: 'åŒå€ï¼', th: 'à¸”à¸±à¸šà¹€à¸šà¸´à¹‰à¸¥!', ar: '!Ù…Ø²Ø¯ÙˆØ¬', hi: 'à¤¡à¤¬à¤²!' },

    // ===== ì´ë²¤íŠ¸ =====
    'event.levelup':      { ko: 'ë ˆë²¨ ì—…!', en: 'Level Up!', ja: 'ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼', zh: 'å‡çº§ï¼', th: 'à¹€à¸¥à¹€à¸§à¸¥à¸­à¸±à¸ž!', ar: '!Ø§Ø±ØªÙ‚Ø§Ø¡', hi: 'à¤²à¥‡à¤µà¤² à¤…à¤ª!' },
    'event.newItem':      { ko: 'ìƒˆ ì•„ì´í…œ íšë“!', en: 'New Item!', ja: 'æ–°ã‚¢ã‚¤ãƒ†ãƒ ç²å¾—ï¼', zh: 'èŽ·å¾—æ–°ç‰©å“ï¼', th: 'à¹„à¸”à¹‰à¹„à¸­à¹€à¸—à¹‡à¸¡à¹ƒà¸«à¸¡à¹ˆ!', ar: '!Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯', hi: 'à¤¨à¤¯à¤¾ à¤†à¤‡à¤Ÿà¤®!' },
    'event.bossAppear':   { ko: 'ë³´ìŠ¤ ë“±ìž¥!', en: 'Boss Appears!', ja: 'ãƒœã‚¹å‡ºç¾ï¼', zh: 'Bosså‡ºçŽ°ï¼', th: 'à¸šà¸­à¸ªà¸›à¸£à¸²à¸à¸!', ar: '!Ø¸Ù‡ÙˆØ± Ø§Ù„Ø±Ø¦ÙŠØ³', hi: 'à¤¬à¥‰à¤¸ à¤ªà¥à¤°à¤•à¤Ÿ!' },
    'event.stageCleared': { ko: 'ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´!', en: 'Stage Cleared!', ja: 'ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ï¼', zh: 'å…³å¡é€šè¿‡ï¼', th: 'à¸œà¹ˆà¸²à¸™à¸”à¹ˆà¸²à¸™!', ar: '!ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…Ø±Ø­Ù„Ø©', hi: 'à¤¸à¥à¤Ÿà¥‡à¤œ à¤•à¥à¤²à¤¿à¤¯à¤°!' }
  },

  // =============================================================
  // ë²ˆì—­ í•¨ìˆ˜
  // =============================================================

  t(key, params) {
    const entry = this.TRANSLATIONS[key] || this._dictionaries[key];
    if (!entry) {
      console.warn('[i18n] ë²ˆì—­ í‚¤ ì—†ìŒ: ' + key);
      return key;
    }

    let text = entry[this._currentLang] || entry[this._fallbackLang] || key;

    if (params) {
      Object.keys(params).forEach(k => {
        text = text.replace(new RegExp('\\{' + k + '\\}', 'g'), params[k]);
      });
    }

    return text;
  },

  tp(key, count, params) {
    const entry = this.TRANSLATIONS[key + '.plural'] || this.TRANSLATIONS[key];
    if (!entry) return key;

    let text = entry[this._currentLang] || entry[this._fallbackLang] || key;
    text = text.replace('{n}', count);
    if (params) {
      Object.keys(params).forEach(k => {
        text = text.replace(new RegExp('\\{' + k + '\\}', 'g'), params[k]);
      });
    }
    return text;
  },

  // ========== ì–¸ì–´ ì „í™˜ ==========
  setLanguage(lang) {
    if (!this.TRANSLATIONS['game.title'][lang] && lang !== 'default') {
      console.warn('[i18n] ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´: ' + lang);
      return false;
    }

    this._currentLang = lang;

    if (typeof TextEngine !== 'undefined' && TextEngine) {
      TextEngine.loadFonts([lang, this._fallbackLang]);
    }

    this._observers.forEach(fn => fn(lang));

    console.log('[i18n] ì–¸ì–´ ë³€ê²½: ' + lang);
    return true;
  },

  getLanguage() { return this._currentLang; },

  onLanguageChange(fn) {
    this._observers.push(fn);
    return () => {
      this._observers = this._observers.filter(f => f !== fn);
    };
  },

  // ========== ì»¤ìŠ¤í…€ ë²ˆì—­ ì¶”ê°€ ==========
  addTranslation(key, translations) {
    this._dictionaries[key] = translations;
  },

  addTranslations(dict) {
    Object.keys(dict).forEach(key => {
      this._dictionaries[key] = dict[key];
    });
  },

  // ========== ìœ í‹¸ ==========
  getAvailableLanguages() {
    return [
      { code: 'ko', name: 'í•œêµ­ì–´', nativeName: 'í•œêµ­ì–´' },
      { code: 'en', name: 'English', nativeName: 'English' },
      { code: 'ja', name: 'Japanese', nativeName: 'æ—¥æœ¬èªž' },
      { code: 'zh', name: 'Chinese (Simplified)', nativeName: 'ç®€ä½“ä¸­æ–‡' },
      { code: 'zh-TW', name: 'Chinese (Traditional)', nativeName: 'ç¹é«”ä¸­æ–‡' },
      { code: 'th', name: 'Thai', nativeName: 'à¸ à¸²à¸©à¸²à¹„à¸—à¸¢' },
      { code: 'ar', name: 'Arabic', nativeName: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },
      { code: 'hi', name: 'Hindi', nativeName: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€' }
    ];
  },

  connectToEngine() {
    console.log('[TextI18n] ë‹¤êµ­ì–´ ë²ˆì—­ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ');
    console.log('[TextI18n] ì§€ì› ì–¸ì–´: ' + this.getAvailableLanguages().map(l => l.nativeName).join(', '));
  }
};

if (typeof window !== 'undefined') window.TextI18n = TextI18n;
if (typeof module !== 'undefined') module.exports = TextI18n;
